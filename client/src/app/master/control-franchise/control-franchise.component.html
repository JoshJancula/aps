<div class='col-lg-12 col-sm-12'>
  <div class='row form' [ngClass]="{'show': addFranchise === true}">
    <mat-card>
      <div class="card-heading">Create Franchise</div>
      <mat-form-field>
        <input matInput placeholder="Name" [readonly]="editing === true" [(ngModel)]="Franchise.Name" />
      </mat-form-field>
      <mat-form-field>
        <input matInput placeholder="Location" />
      </mat-form-field>
      <div *ngIf='editing === false;'>
      <p>Add owner information</p>
      <mat-form-field>
        <input matInput placeholder="First name" [(ngModel)]="User.FirstName" />
      </mat-form-field>
      <mat-form-field>
        <input matInput placeholder="Last name" [(ngModel)]="User.LastName" />
      </mat-form-field>
      <mat-form-field>
        <input matInput placeholder="Username" [readonly]="editing === true" [(ngModel)]="User.Username" />
      </mat-form-field>
      <mat-form-field *ngIf='editing === false'>
        <input matInput placeholder="Password" [(ngModel)]="User.Password" />
      </mat-form-field>
      <mat-form-field>
        <input matInput placeholder="Email" [(ngModel)]="User.Email" />
      </mat-form-field>
      <mat-form-field>
        <input matInput placeholder="Phone" maxlength="14" [(ngModel)]="User.Phone" (input)="formatPhone();" />
      </mat-form-field>
    </div>
      <button class='submit' (click)="submitFranchise();" mat-button>Save Franchise</button>
      <button class='submit' (click)="clearForm();" mat-button>Clear Form</button>
      <!-- <button *ngIf='editing === true;' (click)="deleteFranchise(Franchise.id);" [disabled]="Franchise.Name === 'Master'" mat-button>Delete</button> -->
    </mat-card>
  </div>

  <div class='row results' [ngClass]="{'show': searchFranchises === true}">
    <mat-card *ngFor="let franchise of franchises">
      <div>
        <div class='row'>

          <div class='col-lg-3'>
            <p>Name: {{franchise.Name}}<br>
              Proudly striping since: {{ formatDate(franchise.createdAt) }}<br>
              Active: {{franchise.Active}}
            </p>
            <!-- this needs to be replaced with a deactivate method -->
            <button (click)="editFranchise(franchise.id);" mat-button>Edit</button>
          </div>

          <div class='col-lg-6'>
            <p>Staff</p>
            <div class='row franchiseRow' *ngFor="let user of franchise.Users">
              {{ user.Role }}<br>
              Name: {{ user.FirstName }} {{ user.LastName }}<br>
              Email: {{ user.Email }}<br>
              Phone: {{ user.Phone }}<br>
              Date of employment: {{ formatDate(user.createdAt) }}<br>
            </div>
          </div>

        </div>
      </div>
    </mat-card>
  </div>

  <!-- end data area and display options below -->

  <button class='add' *ngIf='searchFranchises === true' mat-button (click)="searchFranchises = false; addFranchise = true; editing = false;">
    <mat-icon style='color:white'>add</mat-icon>
    Add Franchise
  </button>
  <button class='searchButton' *ngIf='searchFranchises === false' (click)="addFranchise = false; searchFranchises = true;"
    mat-button>
    <mat-icon>search</mat-icon>
    Search Franchises
  </button>

</div>